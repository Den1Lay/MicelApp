{"version":3,"sources":["image/LittleFolder.png","image/PngFile.png","image/Picture.png","redux/actions.js","components/header/header.js","components/header/index.js","components/label/index.js","components/label/label.js","components/container/index.js","components/container/container.js","components/picture/index.js","components/picture/picture.js","components/packmen/index.js","components/packmen/packmen.js","components/preview/preview.js","components/preview/index.js","components/app/App.js","components/app/index.js","redux/reducer.js","redux/store.js","index.js"],"names":["module","exports","getData","dispatch","token","data","inAir","folders","checker","path","push","axios","get","headers","Authorization","then","res","forEach","obj","fold","split","pathToBottom","slice","length","name","substring","indexOf","mut","shift","folderPath","folderMut","dls","lastDls","console","log","type","catch","error","Dls","to","className","Header","connect","state","Label","withRouter","history","url","src","Nine","alt","title","Math","min","lastIndexOf","undefined","onClick","Container","loc","resData","metaData","prop","key","pathname","folderLogo","media_type","pictureLogo","fileLogo","getItems","Picture","props","pass","preview","Packmen","Preview","value","submitHandler","event","preventDefault","loadData","changeHandler","persist","target","setState","this","onSubmit","for","id","placeholder","onChange","loading","React","Component","App","getRoutes","routes","Object","keys","getter","relPath","newPath","replace","exact","component","map","i","render","match","location","params","initalState","reducer","action","store","createStore","applyMiddleware","nextDisp","document","querySelector"],"mappings":"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","file":"static/js/main.6f059286.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/LittleFolder.5a4e9e1e.png\";","module.exports = __webpack_public_path__ + \"static/media/PngFile.de917722.png\";","module.exports = __webpack_public_path__ + \"static/media/Picture.ea92dad2.png\";","import axios from 'axios'\r\n\r\nconst getData = dispatch => token => {\r\n\r\n  let data = {}  // в этот объект буду записаны папки в виде объктов, а в объекте папок будут записаны объекты файлов. Объект в объекте)\r\n  let inAir = []\r\n  let folders = []                                                // {disk: {file1: {}, file2: {} folder: {\r\n                                                                  //          nestedFile1: {}\r\n  const checker = path => {                                      //        }}}\r\n    inAir.push('check')   // главная функция - checker - рекурсивная, ==> запимаем что была создана новая ветвь вызова\r\n    axios\r\n      .get( path, {\r\n        headers: {\r\n          Authorization: `OAuth ${token}`,\r\n          'Content-Type': 'application/json',\r\n        }\r\n      })\r\n      .then(res => {                                      \r\n        let mainData = res.data['_embedded']['items'] // Получаем данные в виде [{}, {}, {}]\r\n        mainData.forEach(obj => {\r\n          if(obj['type'] === 'file') {\r\n            let fold = obj['path'].split('/')\r\n            let pathToBottom = fold.slice(0, fold.length - 1)\r\n            let name = obj.name.substring(0, obj.name.indexOf('.'))      \r\n            let mut = data              // создаем экземпляр объекта в который можем вносить изменения, \r\n                                        //которые в последующем появятся в data\r\n            while(pathToBottom.length > 1) {     // углубляемся в объект пока не дойдем до места хранения файла\r\n              mut = mut[pathToBottom[0]] = {...mut[pathToBottom[0]]}  // попутно объявляем названия папок\r\n              pathToBottom.shift()                                    // файл падая вниз создает за собой папки, что у него в path...\r\n            }\r\n            mut[pathToBottom[0]] = {...mut[pathToBottom[0]], [name]: obj} //записываем файл\r\n\r\n          } else if(obj['type'] === 'dir') {                \r\n            let folderPath = obj.path.split('/')     // так как есть папки без файлов, необходимо \r\n            let folderMut = data                    //повторно пересоздать папки, для каждой папки\r\n            while(folderPath.length > 0) {                          \r\n              folderMut = folderMut[folderPath[0]] = {...folderMut[folderPath[0]]}\r\n              folderPath.shift()\r\n            }\r\n            folders.push(obj.name)\r\n            let dls = obj.path.split('/')\r\n            let lastDls = dls[dls.length - 1]  //оформляем новый запрос для прочтения содержимого папки\r\n            checker(`${path}${lastDls}%2F`)    // соотственно цикл из рекурсивных функий пока не будут обработаны все папки\r\n          }\r\n          console.log(\"RES\",data)                     \r\n        })\r\n        inAir.shift()                   // вызов обработан, значит рипаем его в масcиве\r\n        //console.log('INAIR',inAir)\r\n        if(inAir.length === 0)  { //ловим момент, когда все вызовы обработаны\r\n          \r\n          //console.log('FOLDERS',folders)\r\n          dispatch({\r\n            type: 'ADD_DATA',\r\n            data,\r\n            folders,\r\n            token,\r\n          })\r\n        }\r\n      })\r\n      .catch(error => error === 'Network Error' \r\n      ? dispatch({\r\n        type: 'ERROR_LOAD_DATA',\r\n        error\r\n      })\r\n      : null)\r\n  }\r\n  checker('https://cloud-api.yandex.net:443/v1/disk/resources?path=disk%3A%2F')\r\n}\r\n\r\nconst loadData = data => ({\r\n  type: 'LOAD_DATA'\r\n})\r\n\r\n\r\nexport {\r\n  getData,\r\n  loadData\r\n}","import React from 'react';\r\nimport {connect} from 'react-redux'\r\nimport {Link} from 'react-router-dom'\r\n\r\nimport './header.css'\r\n\r\nconst Dls = ({token}) => {\r\n  return(\r\n    <>\r\n      <Link to='/disk' className='btn btn-primary redir'>/disk</Link>\r\n      <div><span className='token-label'>Current token:</span>{token}</div>\r\n    </>\r\n  )\r\n}\r\n\r\nconst Header = ({token}) => {\r\n  return(\r\n    <div className='header'>\r\n      <Link to='/'><h2 className='main-title'><span className='red'>Y</span>andex RESTful API</h2></Link>\r\n      {token !== null ? <Dls token={token}/> : null}\r\n    </div>\r\n  )\r\n}\r\nconst mapState = state => ({token: state.token})\r\n\r\nexport default connect(mapState)(Header)","import Header from './header';\r\nexport default Header","import Label from './label'\r\nexport default Label","import React from 'react';\r\nimport {withRouter} from 'react-router-dom'\r\n\r\nimport './label.css'\r\n\r\nconst Label = ({history, url, src, name}) => {\r\n  console.log()\r\n  const Nine = () => {\r\n    return(\r\n      <div className='label' >\r\n        <img src={src} alt='Поробуйте ' />\r\n        {name.length > 15                           // Получаем сокращенное название файла\r\n          ? <span title={name}>{name.substring(0, Math.min(10, name.lastIndexOf('.')))+name.substring(name.lastIndexOf('.'))}</span> \r\n          : <span>{name}</span>}\r\n      </div>\r\n    )\r\n  }\r\n  return(\r\n    url !== undefined \r\n    ? <a onClick={() => history.push(url)}>\r\n      {Nine()}\r\n    </a>\r\n    : Nine()\r\n  )\r\n}\r\n\r\nexport default withRouter(Label)","import Container from './container'\r\nexport default Container","import React from 'react';\r\nimport Label from '../label'\r\n\r\nimport folderLogo from '../../image/LittleFolder.png'\r\nimport fileLogo from '../../image/PngFile.png'\r\nimport pictureLogo from '../../image/Picture.png'\r\nimport './container.css'\r\n\r\nconst Container = ({data, loc}) => {\r\n  const getItems = () => {\r\n    let resData = []\r\n    let metaData = data\r\n    for (let prop in metaData) {  \r\n      if(metaData[prop].type === undefined) {\r\n        resData.push(<Label key={prop} url={`${loc.pathname}/${prop}`} name={prop} src={folderLogo}/>)\r\n      } else if (metaData[prop].media_type === 'image') {\r\n        console.log('PIC',metaData[prop])                                  // к сожалению metaData[prop].preview выдает 403\r\n        resData.push(<Label key={prop} url={`${loc.pathname}/${metaData[prop].name}`} name={metaData[prop].name} src={pictureLogo}/>)\r\n      } else {\r\n        resData.push(<Label key={prop} name={metaData[prop].name} src={fileLogo}/>)\r\n      }\r\n    }\r\n    return resData\r\n  }\r\n  return(\r\n    <div className='container'>\r\n      {getItems()}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Container","import Picture from './picture'\r\nexport default Picture","import React from 'react'\r\n\r\nimport './picture.css'\r\n\r\nconst Picture = props => {\r\nconsole.log('INSAD',props.pass.preview) \r\n  return (\r\n    <div className='picture'>\r\n      <img src={`${props.pass.preview}`} alt='Попробуйте в яндекс браузере..' />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Picture","import Packmen from './packmen'\r\nexport default Packmen","import React from 'react'\r\n\r\nimport './packmen.css'\r\n\r\nconst Packmen = () => {\r\n  return (\r\n    <> \r\n      \r\n      <div className=\"lds-css ng-scope\">\r\n      <div className=\"lds-pacman\">\r\n        <div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n        </div>\r\n        <div>\r\n          <div></div>\r\n          <div></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div className='load'>Loading...</div> \r\n    </>\r\n  )\r\n}\r\n\r\nexport default Packmen","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {withRouter} from 'react-router-dom'\r\n\r\nimport {getData, loadData} from '../../redux/actions'\r\n\r\nimport Packmen from '../packmen'\r\nimport './preview.css'\r\n\r\nclass Preview extends React.Component {\r\n  state = {\r\n    value: 'AgAAAAAjMRpNAADLWzTYVY9n9EcygVbADLb0EfE'\r\n  }\r\n\r\n  submitHandler = event => {\r\n    event.preventDefault()\r\n    this.props.getData(this.state.value)\r\n    this.props.loadData()\r\n  }\r\n\r\n\r\n  changeHandler = event => {\r\n    event.persist()\r\n    console.log(event.target.value)\r\n    this.setState({value: event.target.value})\r\n  }\r\n\r\n  render() {\r\n    if(this.props.token !== null ) this.props.history.push('/disk')\r\n    console.log('PROOPS', this.props)\r\n    return (\r\n      <>\r\n        <form className='main-form' onSubmit={this.submitHandler}>\r\n          <label className='main-label' for='main-input'>Token: </label>\r\n          <input type=\"text\" \r\n                value={this.state.value} \r\n                className=\"form-control main-input\"\r\n                id=\"main-input\"\r\n                placeholder=\"Token\"\r\n                onChange={this.changeHandler}></input>\r\n          <button className='btn btn-outline-primary' type='submit'>$UBMIT</button>\r\n        </form>\r\n        {this.props.loading ? <Packmen /> : null}\r\n      </>\r\n    )\r\n  }\r\n}\r\nconst mapDispatch = dispatch => ({\r\n  getData: (token) => getData(dispatch)(token),\r\n  loadData: () => dispatch(loadData())\r\n}),\r\nmapState = state => ({token: state.token, loading: state.loading})\r\n\r\nexport default withRouter(connect(mapState, mapDispatch)(Preview))","import Preview from './preview';\r\nexport default Preview","import React, {Component} from 'react';\r\nimport {connect} from 'react-redux'\r\nimport {Route} from 'react-router-dom'\r\nimport 'bootstrap/dist/css/bootstrap.min.css'\r\n\r\nimport {getData} from '../../redux/actions'\r\n\r\nimport Header from '../header'\r\nimport Container from '../container'\r\nimport Picture from '../picture'\r\nimport Preview from '../preview'\r\nimport './app.css';\r\n\r\nclass App extends Component {\r\n                                      // Для большей наглядности происходящего не стал разбивать \r\n                                      // все на компоненты\r\n                                \r\n  getRoutes = () => {\r\n    let routes = []\r\n    let data = this.props.data;\r\n    if(Object.keys(data).length === 0) return []\r\n    let inAir = []\r\n    const getter = (data, relPath='') => {                //получаю массив всех путей папок\r\n      inAir.push('123')\r\n      for(let prop in data) {\r\n        if(data[prop].type === undefined) {\r\n          let newPath = `${relPath}/${prop}`.replace(/:/g, '')\r\n          routes.push({path: `${newPath}`, data: data[prop]})\r\n          getter(data[prop], newPath)\r\n        }\r\n      }\r\n      inAir.shift()\r\n    }\r\n    getter(data)\r\n    if(inAir == false) return routes\r\n  }   \r\n                                        //создаю роуты для полученных путей\r\n  render() {\r\n    return (\r\n      <div className=\"App\">\r\n        <Header />                                \r\n        <Route exact path='/' component={Preview}/>\r\n          {this.getRoutes().map(({path, data}, i) => <Route key={path} exact path={path} render={({match, location, history}) => <Container data={data} loc={location} />} />)}\r\n          {this.getRoutes().map(({path, data}, i) => <Route key={path} exact path={`${path}/:id`} render={({match, location, history}) => {\r\n            let {id} = match.params\r\n            let pass = data[id.slice(0, id.indexOf('.'))]\r\n            if(this.props.folders.indexOf(id) === -1) return <Picture pass={pass}/>\r\n          }} />)}\r\n      </div>\r\n    )\r\n  }\r\n}\r\nconst mapState = state => ({data: state.data, path: state.path, folders: state.folders, loading: state.loading})\r\nconst mapDispatch = dispatch => ({\r\n  getData: (token) => getData(dispatch)(token)\r\n})\r\n\r\nexport default connect(mapState, mapDispatch)(App)","import App from './App'\r\nexport default App","const initalState = {\r\n  data: {},\r\n  token: null,\r\n  folders: [],\r\n  loading: false,\r\n  error: false\r\n}\r\n\r\nconst reducer = (state = initalState, action) => {\r\n  switch(action.type) {\r\n    case 'ADD_DATA':\r\n      return {\r\n        ...state,\r\n        data: action.data,\r\n        folders: action.folders,\r\n        loading: false,\r\n        token: action.token\r\n      }\r\n    case 'LOAD_DATA':\r\n      return {\r\n        ...state,\r\n        loading: true\r\n      }\r\n    case 'ERROR_LOAD_DATA':\r\n      return {\r\n        ...state,\r\n        error: action.error,\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport default reducer","import {createStore, applyMiddleware} from 'redux'\r\nimport reducer from './reducer'\r\n\r\nconst loggerMid = () => nextDisp => action => {\r\n  console.log(action)\r\n  return nextDisp(action)\r\n}\r\n\r\nconst store = createStore(reducer, applyMiddleware(\r\nloggerMid ))\r\n\r\nexport default store\r\n","import React from 'react';\nimport {render} from 'react-dom';\nimport {Provider} from 'react-redux'\nimport {BrowserRouter as Router} from 'react-router-dom'\n\nimport App from './components/app';\nimport store from './redux/store'\nimport './index.css';\n\nrender(\n<Provider store={store}>\n  <Router>\n    <App />\n  </Router>\n</Provider>, \ndocument.querySelector('#app'));\n"],"sourceRoot":""}